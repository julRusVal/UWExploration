<?xml version="1.0" ?>
<launch>
    <!-- Common args for multiple nodes -->
    <arg name="path_array_topic" default="/multi_agent/path_array"/>
    <!-- Choose number of AUVs to spawn -->
    <arg name="num_auvs" default="1"/> 
    <arg name="vehicle_model" default="hugin"/>
    
    <!-- Specific args for spawner -->
    <!-- Choose spawn separation distance in meters along y-axis -->
    <arg name="spawn_separation" default="10"/>
    <arg name="node_name_spawner" default="auv_spawn_node"/>
    <!-- Choose dataset to use -->
    <arg name="dataset" default="lost_targets"/> 
    <!-- Choose mode ( eg 'gt','sim') -->
    <arg name="mode" default="sim"/>

    <!-- Specific args for navigation -->
    <!-- Choose manual control or waypoint following -->
    <arg name="manual_control" default="false"/>
    <arg name="node_name_navigation" default="auv_navigation_node"/>

    <!-- Specific args for path relayer -->
    <arg name="node_name_relay" default="path_relay_node"/>

    <!-- Specific args for rviz helper -->
    <arg name="node_name_helper" default="rviz_helper_node"/>
    <arg name="rviz_helper" default="false"/>


    <!-- <arg name="multi_agent" default="false"/> NOTE: Not sure about this one -->

    <!-- Global params needed by multiple nodes -->
    <param name="num_auvs" value="$(arg num_auvs)"/>
    <param name="vehicle_model" value="$(arg vehicle_model)"/> 
    <param name="path_array_topic" value="$(arg path_array_topic)"/>

    <!-- Spawn AUVs -->
    <node type="auv_spawner.py" pkg="multi_agent" name="$(arg node_name_spawner)" output="screen">
        <param name="mode" value="$(arg mode)"/>
        <param name="dataset" value="$(arg dataset)"/>
        <param name="auv_launch_file" value="$(find auv_model)/launch/auv_environment.launch"/>    
        <!-- <param name="vehicle_model" value="$(arg vehicle_model)"/>  -->
        <param name="spawn_separation" value="$(arg spawn_separation)"/> 
    </node>

    <!-- Enable navigation for AUVs -->
    <node type="auv_navigation.py" pkg="multi_agent" name="$(arg node_name_navigation)" output="screen">
        <param name="navigation_launch_file" value="$(find basic_navigation)/launch/basic_mission.launch"/>    
        
        <param name="manual_control" value="$(arg manual_control)"/> 
        
    </node>

    <!-- Relay paths to all AUVs -->
    <node type="path_relay.py" pkg="multi_agent" name="$(arg node_name_relay)" output="screen">
    </node>

     <!-- Rviz helper  -->
     <group if="$(arg rviz_helper)">
        <node type="rviz_wp_helper.py" pkg="multi_agent" name="$(arg node_name_helper)" output="screen">
        </node>
    </group>

</launch>
